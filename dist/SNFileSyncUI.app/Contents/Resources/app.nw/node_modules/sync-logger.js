var moment = require( "moment" );
//var colors = require( "colors" );
var fs = require("graceful-fs");
var path = require("path");
var LOG_FILE = path.join(__dirname,"SyncLogFile.html");
fs.writeFileSync(LOG_FILE,"");

function logMessage ( message ){
	var now = "<span style='color:grey'>" + moment().format("YYYY-MM-DD HH:mm:ss") + " </span>";
	var currentFile = readLogFile();
	message = "<div>" + now + message + "</div>";
	currentFile = message + currentFile;
	fs.writeFileSync(LOG_FILE, currentFile);
	//console.log(now,message);
}

function readLogFile (){
	if( fs.existsSync( LOG_FILE ) ){
		return fs.readFileSync(LOG_FILE,"utf-8");	
	} else {
		return "";
	}
}

exports.logSuccess = function( message ){
	logMessage( "<span style='color:green'>" + message + "</span>" );
};

exports.logFailure = function( message ){
	logMessage( "<span style='color:red'>" + message + "</span>");
};

exports.logTitle = function( message ){
	logMessage( "<span style='color:blue'>" + message + "</span>");
}

exports.getLog = function(){
	return readLogFile();
};